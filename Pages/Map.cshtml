@page
@model VONetData.Pages.MapModel
@{
    ViewData["Title"] = "Network Map";
}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
    .map-container {
        max-width: 1200px;
        margin: 2rem auto;
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 2px 16px rgba(0,0,0,0.10);
        padding: 2rem;
    }
    #map {
        width: 100%;
        height: 70vh;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    .map-header {
        text-align: center;
        font-size: 2rem;
        font-weight: bold;
        color: #eab308;
        margin-bottom: 1rem;
    }
    .map-legend {
        margin-top: 1rem;
        background: #f9fafb;
        border-radius: 8px;
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
        color: #444;
        box-shadow: 0 1px 4px rgba(0,0,0,0.05);
        display: inline-block;
    }
    .legend-icon {
        vertical-align: middle;
        margin-right: 6px;
    }
</style>
<div class="map-container">
    <div class="map-header">Vegas Open Network Map</div>
    <div id="map"></div>
    <div class="map-legend">
        <img src="https://cdn-icons-png.flaticon.com/512/684/684908.png" width="24" class="legend-icon" /> Supernode
        <span style="color: #2563eb; font-weight: bold; margin-left: 1.5em;">?</span> Node
        <span style="color: #eab308; font-weight: bold; margin-left: 1.5em;">?</span> Link
    </div>
</div>
<script>
    var map = L.map('map').setView([36.1699, -115.1398], 12); // Las Vegas
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '© OpenStreetMap'
    }).addTo(map);

    // Example supernodes
    var supernodes = [
        { name: "Supernode 1", lat: 36.174, lng: -115.137, info: "Main backbone node downtown." },
        { name: "Supernode 2", lat: 36.162, lng: -115.148, info: "West side supernode." },
        { name: "Supernode 3", lat: 36.185, lng: -115.120, info: "North supernode." }
    ];
    // Example nodes
    var nodes = [
        { name: "Node A", lat: 36.168, lng: -115.135, info: "Residential node." },
        { name: "Node B", lat: 36.165, lng: -115.145, info: "Business node." },
        { name: "Node C", lat: 36.170, lng: -115.150, info: "Community node." },
        { name: "Node D", lat: 36.180, lng: -115.125, info: "Node near North supernode." }
    ];

    // Draw supernodes
    supernodes.forEach(function(node) {
        var marker = L.marker([node.lat, node.lng], {icon: L.icon({iconUrl: 'https://cdn-icons-png.flaticon.com/512/684/684908.png', iconSize: [32,32]})}).addTo(map);
        marker.bindPopup('<b>' + node.name + '</b><br>' + node.info + '<br><span style="color: #eab308; font-weight: bold;">Supernode</span>');
    });
    // Draw nodes
    nodes.forEach(function(node) {
        var marker = L.marker([node.lat, node.lng]).addTo(map);
        marker.bindPopup('<b>' + node.name + '</b><br>' + node.info + '<br><span style="color: #2563eb; font-weight: bold;">Node</span>');
    });
    // Example links (lines)
    var links = [
        [[36.174, -115.137], [36.168, -115.135]],
        [[36.174, -115.137], [36.170, -115.150]],
        [[36.162, -115.148], [36.165, -115.145]],
        [[36.162, -115.148], [36.170, -115.150]],
        [[36.185, -115.120], [36.180, -115.125]],
        [[36.185, -115.120], [36.174, -115.137]]
    ];
    links.forEach(function(link) {
        L.polyline(link, {color: '#eab308', weight: 3, opacity: 0.7}).addTo(map);
    });

    // Add map controls/features
    L.control.scale().addTo(map);
    map.on('click', function(e) {
        L.popup()
            .setLatLng(e.latlng)
            .setContent('Coordinates: ' + e.latlng.lat.toFixed(5) + ', ' + e.latlng.lng.toFixed(5))
            .openOn(map);
    });
</script>
